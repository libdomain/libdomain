services:
  samba:
    build: samba-container
    container_name: samba-server
    ports:
      - '3890:389'
    restart: "no"
    privileged: true
  testenv:
    build: testenv-container
    container_name: testenv
    restart: "no"
    environment:
      - LDAP_SERVER=ldap://samba-server:3890
    volumes:
      - data-volume:/app
    depends_on:
      samba:
        condition: service_started

volumes:
  data-volume:
    external: true

